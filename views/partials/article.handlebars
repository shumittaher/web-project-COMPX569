<div id="article-{{this.article_id}}" class="articlesCard card mb-3" data-article-id="{{this.article_id}}" data-user-id="{{this.userid}}">

    <div class="card-body">
        <img class="avatar-img mx-3 img-fluid float-end" src="public/avatarImages/{{this.avatar}}">
        <h5 class="card-title">{{this.title}}</h5>
        <small class="text-muted">Posted by {{this.fullName}}</small><br>
        <small class="text-muted">{{this.postTime}}</small>
        <hr>

        {{#if this.image_path}}
            <img src="{{this.image_path}}" alt="Article Image" onerror="this.onerror=null; this.src='public/placeholder.jpg';"
            class="img-fluid float-end ms-3 mb-3 article-image">
        {{/if}}
        <div class="card-text mt-3">
            {{{this.content}}}
        </div>
    </div>

        {{#if this.ai_summary}}
        <div class="px-3">
            <div class="alert alert-info border-0 shadow-sm p-3">
            <div class="d-flex align-items-center justify-content-between">
                <h6 class="mb-0 fw-bold">
                ü§ñ AI Summary
                </h6>
                <span class="badge text-bg-info">Auto</span>
            </div>

            <hr class="my-2">

            <p class="mb-0 text-body" style="white-space: pre-line;">
                {{{this.ai_summary}}}
            </p>
            </div>
        </div>
        {{/if}}
    <div class="card-footer d-flex justify-content-between align-items-center">

        <div id="like-status-{{this.article_id}}" class="d-flex align-items-center opacity-0 likeButtonsBox">

            {{#if this.userLoggedIn}}
                <button data-likeAction="true" class="btn btn-outline-primary addLikeButton">
                    <span>üëç</span>
                    <span>Like </span>
                </button>
                <button data-likeAction="false" class="btn btn-primary removeLikeButton">
                    <span>‚ù§Ô∏è</span>
                    <span>Liked</span>
                </button>
            {{/if}}


        </div>

        <div class="ms-3 d-inline-flex flex-grow-1 text-lg fw-bold fs-4" id="like-count-{{this.article_id}}"></div>


        {{#if this.userLoggedIn}}

            <div class="d-flex align-items-center justify-content-between align-items-center">

                {{#if this.isAuthor}}
                <div class="mx-1">
                    <button onClick="editClicked({{this.article_id}})" class="btn btn-warning">
                        ‚úèÔ∏è Edit This
                    </button>
                </div>

                <div class="mx-1">
                    <button onClick="deleteClicked({{this.article_id}})" class="btn btn-danger">
                        üóëÔ∏è Delete
                    </button>
                </div>

                <div class="mx-1">
                <button
                    id="aiSummaryBtn-{{this.article_id}}"
                    onClick="aiSummaryClicked({{this.article_id}})"
                    class="btn btn-info"
                    type="button"
                >
                    ü§ñ AI Summary
                </button>
                </div>
                {{/if}}

                <div class="ms-1 commentBox">
                    <button class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#commentOnArticle-{{this.article_id}}">
                        Ô∏èüó®Ô∏è Comment
                    </button>
                </div>
            </div>

        {{/if}}

    </div>



    <div id="commentOnArticle-{{this.article_id}}" class="collapse">
        <form action="/api/comment" method="post" id="commentForm">
            <input type="hidden" name="parent_id" value="{{this.article_id}}">
            <input type="hidden" name="anc_id" value="{{this.article_id}}">

            <div class="p-3" style="display: grid; row-gap: 1em;">

                <div class="form-group d-flex align-items-start">
                    <label for="commentContent-{{this.article_id}}" class="mx-3 w-25 text-end">Your Comment</label>
                    <textarea id="commentContent-{{this.article_id}}" required class="form-control" name="commentContent" rows="5" placeholder="Your Comment..."></textarea>
                </div>
            </div>

            <input class="btn btn-primary btn-lg py-2 w-100" type="submit" value="üó®Ô∏è Save Comment">
        </form>
    </div>
    <button onclick="loadCommentClicked({{this.article_id}})" class="btn btn-secondary btn-sm"
            data-bs-toggle="collapse" data-bs-target="#commentsViewBoxArticle-{{this.article_id}}">Show Comments</button>

    <div class="commentsViewBox p-2 collapse border-5 border-primary-subtle border-start" id="commentsViewBoxArticle-{{this.article_id}}">
        <div style="height: 250px;" class="d-flex justify-content-center align-items-center">
            <h6>Loading</h6>
        </div>
    </div>
</div>